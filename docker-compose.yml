version: '3'

services:

  gearpump-ui:
    build: .
    entrypoint: ./entrypoint.sh
    command: bin/services
    environment:
        - MASTERS=["gearpump-master:3000"]
        - HOSTNAME=gearpump-master
    ports:
      - "8090:8090"

  gearpump-master:
    build: .
    entrypoint: ./entrypoint.sh
    command: bin/master -ip gearpump-master -port 3000
    environment:
        - MASTERS=["gearpump-master:3000"]
        - HOSTNAME=gearpump-master

  gearpump-worker:
    hostname: gearpump-worker-{{.Node}}
    entrypoint: ./entrypoint.sh
    build: .
    command: bin/worker 
    environment:
        - MASTERS=["gearpump-master:3000"]
        - HOSTNAME=gearpump-master